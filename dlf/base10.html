<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Welcome base10</title>

    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/jumbotron-narrow.css" rel="stylesheet">
    <script src="//www.parsecdn.com/js/parse-1.6.7.min.js"></script>
    <script src="../js/jquery-2.1.4.min.js"></script>
    <script>
	function refresh(){
		Parse.$ = jQuery;
                	Parse.initialize("ORdRb6ZtoTRSIUBeDKCcpigKQR9Pr6YJjeguuN9t", "ec8NHsZDP17pTdRjBKQFAPxB8ihduGt6e8NAGdaH");
			var Slot =  Parse.Object.extend("KPMG");
			var query = new Parse.Query(Slot);


			query.equalTo("objectId","8CeEdrKPnC");
			query.first({
					success: function(slot) {
						document.getElementById("slot_basement").value = slot.get("parking_counter");
            document.getElementById("basement_people").value=slot.get("waitlist");
            document.getElementById("basement_waitlist").innerHTML = slot.get("waitlist");

						if(slot.get("parking_counter")<21){
                                                    document.getElementById("status_basement").innerHTML = "Current Slot: "+slot.get("parking_counter");
                                                    document.getElementById("basement_min").disabled= "";
                                                    document.getElementById("slot_basement").disabled= "";
                                                    document.getElementById("basement_add").disabled= "";
                                                    document.getElementById("basement_less").disabled= "disabled";
                                                    document.getElementById("basement_enter").disabled="";
					}
					else {
						document.getElementById("status_basement").innerHTML = "Available";
					}
					}
			});

			var Slot1 = Parse.Object.extend("PWC");
			var query1=  new Parse.Query(Slot1);
			query1.equalTo("objectId","quOVEYWF6d");
			query1.first({
					success: function(slot1) {
						document.getElementById("slot_pwc").value = slot1.get("parking_counter");
						if(slot1.get("parking_counter")<21){
                                                    document.getElementById("status_pwc").innerHTML = "Current Slot: "+slot1.get("parking_counter");
                                                    document.getElementById("pwc_min").disabled= "";
                                                    document.getElementById("slot_pwc").disabled= "";
                                                    document.getElementById("pwc_add").disabled= "";
                                                    document.getElementById("pwc_less").disabled= "disabled";
                                                    document.getElementById("pwc_enter").disabled="";
					}
					else {
						document.getElementById("status_pwc").innerHTML = "Available";
					}
					}
			});
		}

		window.onload = function(){refresh();};
	</script>

  </head>

  <body>
    <div class="container">
      <div class="header clearfix">
        <nav>
          <ul class ="nav nav-pills pull-right">
			<li role="presentation" class="active"><a href="../index.html">Logout</a></li>
		  </ul>
        </nav>
      </div>

	<!--KPMG BASEMENT PARKING-->


      <div class="jumbotron">
		<h2 style="color:#984807"><strong>KPMG Basement Parking</strong></h2>
		<hr>
		<button type="button"  id= "basement_less" onclick="update_basement()" class="btn-md btn-warning" >20 Slots Left</button>
		<button type="button"  id= "basement_avail" onclick="basement_available()" class="btn-md btn-success" >Available</button>
		<hr>
		<button type="button"  id="basement_min" onclick="basement_minus()" class="btn-sm btn-danger" disabled>-</button>
		<input id ="slot_basement" value="" type="number" disabled ></input>
		<button type="button"  id="basement_add" onclick="basement_plus()" class="btn-sm btn-success" disabled>+</button>
		<br>
		<button type="button"  id="basement_enter" onclick="basement_enter()" class="btn-sm btn-primary" disabled>Enter</button>
                <hr>
		<h2 id ="status_basement" style="color:#984807"><strong></strong></h2>
		<hr>
		<button type="button"  id="surface_enter" onclick="kpmg_base_token()" class="btn btn-block btn-primary" >Token Recieved</button>
                <h3 id="token_kpmg_base" style="color:#984807"><strong></strong></h2>
                  <hr>
                  <input id ="basement_people" value="" type="number"  ></input>
                  <button type="button"   onclick="slots_taken()" class="btn-md btn-warning" >Enter people</button>
                  <h2 id ="basement_waitlist" style="color:#984807"><strong></strong></h2>

	</div>


	<script>

  function slots_taken() {
    Parse.$ = jQuery;
  Parse.initialize("ORdRb6ZtoTRSIUBeDKCcpigKQR9Pr6YJjeguuN9t", "ec8NHsZDP17pTdRjBKQFAPxB8ihduGt6e8NAGdaH");
  var Slot =  Parse.Object.extend("KPMG");
  var query = new Parse.Query(Slot);
  query.equalTo("objectId","8CeEdrKPnC");
  query.first({
  success: function(slot) {

  slot.set("waitlist",parseInt(document.getElementById("basement_people").value));
  slot.save();
  document.getElementById("basement_people").value=slot.get("waitlist");
  document.getElementById("basement_waitlist").innerHTML = slot.get("waitlist");

  }
  })

  }

                function kpmg_base_token () {

                    Parse.$ = jQuery;
			Parse.initialize("ORdRb6ZtoTRSIUBeDKCcpigKQR9Pr6YJjeguuN9t", "ec8NHsZDP17pTdRjBKQFAPxB8ihduGt6e8NAGdaH");
                        var token = Parse.Object.extend("base_kpmg");
                        var token = new token();
                        token.save({parkin_name: "KPMG"}).then(function(object) {
                            document.getElementById("token_kpmg_base").innerHTML=token.createdAt;
                    });
                }

                function basement_available() {
                Parse.$ = jQuery;
			Parse.initialize("ORdRb6ZtoTRSIUBeDKCcpigKQR9Pr6YJjeguuN9t", "ec8NHsZDP17pTdRjBKQFAPxB8ihduGt6e8NAGdaH");
			var Slot =  Parse.Object.extend("KPMG");
			var query = new Parse.Query(Slot);
			query.equalTo("objectId","8CeEdrKPnC");
			query.first({
				success: function(slot) {
					slot.set("parking_counter",21);
                                        basement_insight(slot.get("parking_counter"));
					slot.save();
					//document.getElementById("slot_basement").value=slot.get("parking_counter");
					document.getElementById("status_basement").innerHTML ="Current status" + ": " + "Available";
					document.getElementById("basement_min").disabled= "disabled";
					document.getElementById("basement_add").disabled= "disabled";
					document.getElementById("basement_less").disabled= "";
					document.getElementById("basement_enter").disabled="disabled";
					document.getElementById("slot_basement").disabled="disabled";
					slot.save();
				}
			})

                }


		function basement_enter() {
                        Parse.$ = jQuery;
			Parse.initialize("ORdRb6ZtoTRSIUBeDKCcpigKQR9Pr6YJjeguuN9t", "ec8NHsZDP17pTdRjBKQFAPxB8ihduGt6e8NAGdaH");
			var Slot =  Parse.Object.extend("KPMG");
			var query = new Parse.Query(Slot);
			query.equalTo("objectId","8CeEdrKPnC");
			query.first({
				success: function(slot) {
                                basement_insight(slot.get("parking_counter"));
				if(document.getElementById("slot_basement").value < 21 && document.getElementById("slot_basement").value >=0)
                                    {
					slot.set("parking_counter",parseInt(document.getElementById("slot_basement").value));
					slot.save();
					document.getElementById("slot_basement").value=slot.get("parking_counter");
					document.getElementById("status_basement").innerHTML = slot.get("parking_counter");
				}
				}
			})

		}

		function update_basement() {
			Parse.$ = jQuery;
			Parse.initialize("ORdRb6ZtoTRSIUBeDKCcpigKQR9Pr6YJjeguuN9t", "ec8NHsZDP17pTdRjBKQFAPxB8ihduGt6e8NAGdaH");
			var Slot =  Parse.Object.extend("KPMG");
			var query = new Parse.Query(Slot);
			query.equalTo("objectId","8CeEdrKPnC");
			query.first({
				success: function(slot) {

					slot.set("parking_counter",20);
                                        basement_insight(slot.get("parking_counter"));
				document.getElementById("slot_basement").value=slot.get("parking_counter");
					document.getElementById("status_basement").innerHTML ="Current status" + ": " + slot.get("parking_counter");
					document.getElementById("basement_min").disabled= "";
                                        document.getElementById("slot_basement").disabled= "";
					document.getElementById("basement_add").disabled= "";
					document.getElementById("basement_less").disabled= "disabled";
					document.getElementById("basement_enter").disabled="";
					slot.save();
				}
			})
		}

		function basement_minus(){
			Parse.$ = jQuery;
			Parse.initialize("ORdRb6ZtoTRSIUBeDKCcpigKQR9Pr6YJjeguuN9t", "ec8NHsZDP17pTdRjBKQFAPxB8ihduGt6e8NAGdaH");
			var Slot =  Parse.Object.extend("KPMG");
			var query = new Parse.Query(Slot);
			query.equalTo("objectId","8CeEdrKPnC");
			query.first({
				success: function(slot) {
                                basement_insight(slot.get("parking_counter"));
					if(slot.get("parking_counter") > 0)
				{
					slot.increment("parking_counter", -1);
					slot.save();
					document.getElementById("slot_basement").value = slot.get("parking_counter");
					document.getElementById("status_basement").innerHTML = "Current Slot: "+slot.get("parking_counter");
					}
				}
			})
		}

		function basement_plus() {
			Parse.$ = jQuery;
			Parse.initialize("ORdRb6ZtoTRSIUBeDKCcpigKQR9Pr6YJjeguuN9t", "ec8NHsZDP17pTdRjBKQFAPxB8ihduGt6e8NAGdaH");
			var Slot =  Parse.Object.extend("KPMG");
			var query = new Parse.Query(Slot);
			query.equalTo("objectId","8CeEdrKPnC");
			query.first({
				success: function(slot) {
				basement_insight(slot.get("parking_counter"));
					if(slot.get("parking_counter") <  20)
				{
					slot.increment("parking_counter", 1);
					slot.save();
					document.getElementById("slot_basement").value = slot.get("parking_counter");
					document.getElementById("status_basement").innerHTML = "Current Slot: "+ slot.get("parking_counter");
					}

				else {
                                        slot.set("parking_counter",21);
					document.getElementById("basement_min").disabled= "disabled";
					document.getElementById("basement_add").disabled= "disabled";
					document.getElementById("basement_less").disabled= "";
					document.getElementById("basement_enter").disabled="disabled";
					document.getElementById("slot_basement").disabled="disabled";
					document.getElementById("status_basement").innerHTML ="Available";
					slot.save();
					}
				}
			})
		}

		function basement_insight(a) {
                        var a = a;
                        Parse.$ = jQuery;
                        Parse.initialize("ORdRb6ZtoTRSIUBeDKCcpigKQR9Pr6YJjeguuN9t", "ec8NHsZDP17pTdRjBKQFAPxB8ihduGt6e8NAGdaH");
                        var ins = Parse.Object.extend("kpmg_insights");
                        var ins = new ins();
                        ins.save({parkin_name: "BASEMENT",parkin_count: a}).then(function(object) {
                    });

		}

		</script>


    <!--PWC  Basement PARKING-->


      <div class="jumbotron">
		<h2 style="color:#984807"><strong>PWC Basement Parking</strong></h2>
		<hr>
		<button type="button"  id= "pwc_less" onclick="update_pwc()" class="btn-md btn-warning" >20 Slots Left</button>
		<button type="button"  id= "pwc_avail" onclick="pwc_available()" class="btn-md btn-success" >Available</button>
		<hr>
		<button type="button"  id="pwc_min" onclick="pwc_minus()" class="btn-sm btn-danger" disabled>-</button>
		<input id ="slot_pwc" value="" type="number" disabled ></input>
		<button type="button"  id="pwc_add" onclick="pwc_plus()" class="btn-sm btn-success" disabled>+</button>
		<br>
		<button type="button"  id="pwc_enter" onclick="pwc_enter()" class="btn-sm btn-primary" disabled>Enter</button>
                <hr>
		<h2 id ="status_pwc" style="color:#984807"><strong></strong></h2>
		<hr>
		<button type="button"  id="pwc_token" onclick="pwc_token()" class="btn btn-block btn-primary" >Token Recieved</button>
                <h3 id="token_pwc" style="color:#984807"><strong></strong></h2>
	</div>


	<script>
                function pwc_token () {

                    Parse.$ = jQuery;
			Parse.initialize("ORdRb6ZtoTRSIUBeDKCcpigKQR9Pr6YJjeguuN9t", "ec8NHsZDP17pTdRjBKQFAPxB8ihduGt6e8NAGdaH");
                        var token = Parse.Object.extend("base_pwc");
                        var token = new token();
                        token.save({parkin_name: "PWC",}).then(function(object) {
                            document.getElementById("token_pwc").innerHTML=token.createdAt;
                    });
                }

                function pwc_available() {
                Parse.$ = jQuery;
			Parse.initialize("ORdRb6ZtoTRSIUBeDKCcpigKQR9Pr6YJjeguuN9t", "ec8NHsZDP17pTdRjBKQFAPxB8ihduGt6e8NAGdaH");
			var Slot =  Parse.Object.extend("PWC");
			var query = new Parse.Query(Slot);
			query.equalTo("objectId","quOVEYWF6d");
			query.first({
				success: function(slot) {
					slot.set("parking_counter",21);
					pwc_insight(slot.get("parking_counter"));
					slot.save();
					//document.getElementById("slot_pwc").value=slot.get("parking_counter");
					document.getElementById("status_pwc").innerHTML ="Current status" + ": " + "Available";
					document.getElementById("pwc_min").disabled= "disabled";
					document.getElementById("pwc_add").disabled= "disabled";
					document.getElementById("pwc_less").disabled= "";
					document.getElementById("pwc_enter").disabled="disabled";
					document.getElementById("slot_pwc").disabled="disabled";
					slot.save();
				}
			})

                }


		function pwc_enter() {
                        Parse.$ = jQuery;
			Parse.initialize("ORdRb6ZtoTRSIUBeDKCcpigKQR9Pr6YJjeguuN9t", "ec8NHsZDP17pTdRjBKQFAPxB8ihduGt6e8NAGdaH");
			var Slot =  Parse.Object.extend("PWC");
			var query = new Parse.Query(Slot);
			query.equalTo("objectId","quOVEYWF6d");
			query.first({
				success: function(slot) {
				if(document.getElementById("slot_pwc").value < 21 && document.getElementById("slot_pwc").value >=0)
                                    {
					slot.set("parking_counter",parseInt(document.getElementById("slot_pwc").value));
					pwc_insight(slot.get("parking_counter"));
					slot.save();
					document.getElementById("slot_pwc").value=slot.get("parking_counter");
					document.getElementById("status_pwc").innerHTML = slot.get("parking_counter");
				}
				}
			})

		}

		function update_pwc() {
			Parse.$ = jQuery;
			Parse.initialize("ORdRb6ZtoTRSIUBeDKCcpigKQR9Pr6YJjeguuN9t", "ec8NHsZDP17pTdRjBKQFAPxB8ihduGt6e8NAGdaH");
			var Slot =  Parse.Object.extend("PWC");
			var query = new Parse.Query(Slot);
			query.equalTo("objectId","quOVEYWF6d");
			query.first({
				success: function(slot) {
					slot.set("parking_counter",20);
					pwc_insight(slot.get("parking_counter"));
					document.getElementById("slot_pwc").value=slot.get("parking_counter");
					document.getElementById("status_pwc").innerHTML ="Current status" + ": " + slot.get("parking_counter");
					document.getElementById("pwc_min").disabled= "";
                                        document.getElementById("slot_pwc").disabled= "";
					document.getElementById("pwc_add").disabled= "";
					document.getElementById("pwc_less").disabled= "disabled";
					document.getElementById("pwc_enter").disabled="";
					slot.save();
				}
			})
		}

		function pwc_minus(){
			Parse.$ = jQuery;
			Parse.initialize("ORdRb6ZtoTRSIUBeDKCcpigKQR9Pr6YJjeguuN9t", "ec8NHsZDP17pTdRjBKQFAPxB8ihduGt6e8NAGdaH");
			var Slot =  Parse.Object.extend("PWC");
			var query = new Parse.Query(Slot);
			query.equalTo("objectId","quOVEYWF6d");
			query.first({
				success: function(slot) {
				pwc_insight(slot.get("parking_counter"));
					if(slot.get("parking_counter") > 0)
				{
					slot.increment("parking_counter", -1);
					slot.save();
					document.getElementById("slot_pwc").value = slot.get("parking_counter");
					document.getElementById("status_pwc").innerHTML = "Current Slot: "+slot.get("parking_counter");
					}
				}
			})
		}

		function pwc_plus() {
			Parse.$ = jQuery;
			Parse.initialize("ORdRb6ZtoTRSIUBeDKCcpigKQR9Pr6YJjeguuN9t", "ec8NHsZDP17pTdRjBKQFAPxB8ihduGt6e8NAGdaH");
			var Slot =  Parse.Object.extend("PWC");
			var query = new Parse.Query(Slot);
			query.equalTo("objectId","quOVEYWF6d");
			query.first({
				success: function(slot) {
				pwc_insight(slot.get("parking_counter"));
					if(slot.get("parking_counter") <  20)
				{
					slot.increment("parking_counter", 1);
					slot.save();
					document.getElementById("slot_pwc").value = slot.get("parking_counter");
					document.getElementById("status_pwc").innerHTML = "Current Slot: "+ slot.get("parking_counter");
					}

				else {
                                        slot.set("parking_counter",21);
					document.getElementById("pwc_min").disabled= "disabled";
					document.getElementById("pwc_add").disabled= "disabled";
					document.getElementById("pwc_less").disabled= "";
					document.getElementById("pwc_enter").disabled="disabled";
					document.getElementById("slot_pwc").disabled="disabled";
					document.getElementById("status_pwc").innerHTML ="Available";
					slot.save();
					}
				}
			})
		}

		function pwc_insight(a) {
                        var a = a;
                        Parse.$ = jQuery;
                        Parse.initialize("ORdRb6ZtoTRSIUBeDKCcpigKQR9Pr6YJjeguuN9t", "ec8NHsZDP17pTdRjBKQFAPxB8ihduGt6e8NAGdaH");
                        var ins = Parse.Object.extend("pwc_insights");
                        var ins = new ins();
                        ins.save({parkin_name: "BASEMENT",parkin_count: a}).then(function(object) {
                    });

		}

		</script>


      </div>
    </div>
  </body>
</html>
